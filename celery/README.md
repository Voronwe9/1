# API для апскейлинга изображений

## Описание
Данный сервис предоставляет возможность увеличения разрешения изображений с использованием модели машинного обучения. Он построен на `Flask` и использует `Celery` для обработки изображений в фоне. Хранение данных осуществляется через `Redis`.

## Требования для запуска

1. Установите все необходимые библиотеки:
```bash
pip install -r requirements.txt
```

2. Запустите сервисы с помощью Docker Compose:
```bash
docker-compose up -d
```

Это запустит Redis, необходимый для работы Celery.

3. Запустите Celery воркеры:
```bash
celery -A app.celery worker --loglevel=info
```

4. Запустите Flask приложение:
```bash
python app.py
```

## Доступные эндпоинты

### 1. Загрузка изображения и запуск задачи на апскейлинг
**POST** `/upscale`
- **Описание:** Загружает изображение и отправляет его на обработку.
- **Параметры запроса:**
  - `image`: файл изображения
- **Ответ:** JSON-объект с ID задачи и именем выходного файла.

### 2. Проверка статуса обработки
**GET** `/upscale/{task_id}`
- **Описание:** Позволяет узнать статус выполнения задачи.
- **Ответ:** JSON-объект со статусом задачи (`PENDING`, `STARTED`, `SUCCESS`, `FAILURE`).

### 3. Получение обработанного изображения
**GET** `/processed/{file}`
- **Описание:** Позволяет скачать обработанное изображение.
- **Ответ:** Файл изображения.

## Использование клиента
В репозитории присутствует `client.py`, который позволяет автоматически отправлять изображения на сервер и получать результат.

1. Разместите файлы изображений в папке `example`.
2. Запустите клиент:
```bash
python client.py
```
3. Клиент загрузит изображения, получит статус задачи и скачает обработанный файл.

## Docker Compose

Файл `docker-compose.yml` содержит настройки для запуска Redis-сервиса:
```yaml
version: '3.1'

services:
  redis:
    image: redis
    ports:
      - "6379:6379"
```

Redis используется как брокер сообщений и хранилище результатов для Celery.


